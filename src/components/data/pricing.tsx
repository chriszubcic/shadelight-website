type DimensionMap = { [width: number]: number };

interface PriceMatrix {
    [height: number]: DimensionMap;
}

class Pricing {
    private static group1PriceMatrix: PriceMatrix = {
        600: {
            610: 62,
            760: 64,
            910: 70,
            1060: 77,
            1210: 80,
            1360: 85,
            1510: 94,
            1660: 96,
            1810: 101,
            1960: 104,
            2110: 113,
            2260: 116,
            2410: 121,
            2560: 137,
            2710: 154,
            2860: 162,
            3010: 168
        },
        900: {
            610: 64,
            760: 67,
            910: 74,
            1060: 80,
            1210: 83,
            1360: 89,
            1510: 101,
            1660: 103,
            1810: 105,
            1960: 110,
            2110: 119,
            2260: 122,
            2410: 127,
            2560: 148,
            2710: 163,
            2860: 170,
            3010: 178
        },
        1200: {
            610: 66,
            760: 70,
            910: 78,
            1060: 83,
            1210: 87,
            1360: 93,
            1510: 109,
            1660: 112,
            1810: 114,
            1960: 118,
            2110: 125,
            2260: 130,
            2410: 137,
            2560: 157,
            2710: 171,
            2860: 181,
            3010: 187
        },
        1500: {
            610: 68,
            760: 74,
            910: 80,
            1060: 86,
            1210: 92,
            1360: 97,
            1510: 117,
            1660: 119,
            1810: 122,
            1960: 127,
            2110: 129,
            2260: 141,
            2410: 149,
            2560: 166,
            2710: 185,
            2860: 193,
            3010: 200
        },
        1800: {
            610: 71,
            760: 78,
            910: 84,
            1060: 89,
            1210: 97,
            1360: 105,
            1510: 120,
            1660: 123,
            1810: 125,
            1960: 130,
            2110: 144,
            2260: 151,
            2410: 156,
            2560: 181,
            2710: 197,
            2860: 204,
            3010: 212
        },
        2100: {
            610: 76,
            760: 88,
            910: 90,
            1060: 97,
            1210: 112,
            1360: 122,
            1510: 130,
            1660: 132,
            1810: 136,
            1960: 140,
            2110: 154,
            2260: 160,
            2410: 166,
            2560: 193,
            2710: 210,
            2860: 221,
            3010: 229
        },
        2400: {
            610: 78,
            760: 90,
            910: 95,
            1060: 101,
            1210: 120,
            1360: 124,
            1510: 133,
            1660: 139,
            1810: 147,
            1960: 154,
            2110: 162,
            2260: 167,
            2410: 177,
            2560: 203,
            2710: 223,
            2860: 231,
            3010: 241
        },
        2700: {
            610: 81,
            760: 95,
            910: 101,
            1060: 109,
            1210: 122,
            1360: 127,
            1510: 144,
            1660: 148,
            1810: 153,
            1960: 166,
            2110: 169,
            2260: 178,
            2410: 186,
            2560: 217,
            2710: 234,
            2860: 245,
            3010: 256
        },
        3000: {
            610: 87,
            760: 104,
            910: 110,
            1060: 118,
            1210: 128,
            1360: 131,
            1510: 157,
            1660: 161,
            1810: 166,
            1960: 173,
            2110: 187,
            2260: 197,
            2410: 202,
            2560: 237,
            2710: 261,
            2860: 270,
            3010: 282
        },
        3300: {
            610: 94,
            760: 115,
            910: 120,
            1060: 129,
            1210: 136,
            1360: 140,
            1510: 171,
            1660: 178,
            1810: 184,
            1960: 196,
            2110: 203,
            2260: 206,
            2410: 214,
            2560: 252,
            2710: 275,
            2860: 285,
            3010: 299
        }
    };

    private static group2PriceMatrix: PriceMatrix = {
        600: {
            610: 64,
            760: 71,
            910: 81,
            1060: 84,
            1210: 90,
            1360: 92,
            1510: 106,
            1660: 112,
            1810: 115,
            1960: 118,
            2110: 124,
            2260: 125,
            2410: 130,
            2560: 145,
            2710: 171,
            2860: 177,
            3010: 191
        },
        900: {
            610: 67,
            760: 75,
            910: 84,
            1060: 88,
            1210: 93,
            1360: 96,
            1510: 114,
            1660: 117,
            1810: 120,
            1960: 123,
            2110: 132,
            2260: 133,
            2410: 138,
            2560: 159,
            2710: 187,
            2860: 193,
            3010: 205
        },
        1200: {
            610: 70,
            760: 78,
            910: 87,
            1060: 92,
            1210: 96,
            1360: 104,
            1510: 123,
            1660: 126,
            1810: 128,
            1960: 131,
            2110: 140,
            2260: 145,
            2410: 150,
            2560: 173,
            2710: 202,
            2860: 210,
            3010: 220
        },
        1500: {
            610: 74,
            760: 81,
            910: 89,
            1060: 96,
            1210: 99,
            1360: 114,
            1510: 130,
            1660: 136,
            1810: 139,
            1960: 144,
            2110: 149,
            2260: 155,
            2410: 163,
            2560: 188,
            2710: 218,
            2860: 226,
            3010: 234
        },
        1800: {
            610: 78,
            760: 87,
            910: 94,
            1060: 101,
            1210: 103,
            1360: 117,
            1510: 136,
            1660: 143,
            1810: 149,
            1960: 154,
            2110: 160,
            2260: 168,
            2410: 176,
            2560: 201,
            2710: 232,
            2860: 241,
            3010: 252
        },
        2100: {
            610: 81,
            760: 99,
            910: 101,
            1060: 114,
            1210: 124,
            1360: 139,
            1510: 149,
            1660: 151,
            1810: 154,
            1960: 159,
            2110: 171,
            2260: 180,
            2410: 191,
            2560: 218,
            2710: 251,
            2860: 265,
            3010: 272
        },
        2400: {
            610: 84,
            760: 100,
            910: 105,
            1060: 118,
            1210: 129,
            1360: 149,
            1510: 151,
            1660: 161,
            1810: 169,
            1960: 176,
            2110: 189,
            2260: 196,
            2410: 205,
            2560: 238,
            2710: 261,
            2860: 271,
            3010: 282
        },
        2700: {
            610: 90,
            760: 108,
            910: 116,
            1060: 122,
            1210: 132,
            1360: 158,
            1510: 162,
            1660: 168,
            1810: 179,
            1960: 187,
            2110: 197,
            2260: 208,
            2410: 217,
            2560: 254,
            2710: 280,
            2860: 290,
            3010: 302
        },
        3000: {
            610: 94,
            760: 120,
            910: 129,
            1060: 135,
            1210: 140,
            1360: 162,
            1510: 171,
            1660: 176,
            1810: 187,
            1960: 197,
            2110: 208,
            2260: 221,
            2410: 233,
            2560: 267,
            2710: 297,
            2860: 308,
            3010: 320
        },
        3300: {
            610: 108,
            760: 133,
            910: 143,
            1060: 148,
            1210: 151,
            1360: 173,
            1510: 179,
            1660: 188,
            1810: 196,
            1960: 202,
            2110: 215,
            2260: 230,
            2410: 241,
            2560: 282,
            2710: 314,
            2860: 326,
            3010: 339
        }
    };

    private static group3PriceMatrix: PriceMatrix = {
        600: {
            610: 91,
            760: 99,
            910: 104,
            1060: 115,
            1210: 121,
            1360: 130,
            1510: 139,
            1660: 146,
            1810: 155,
            1960: 164,
            2110: 194,
            2260: 200,
            2410: 211,
            2560: 219,
            2710: 276,
            2860: 290,
            3010: 299
        },
        900: {
            610: 95,
            760: 103,
            910: 109,
            1060: 119,
            1210: 124,
            1360: 139,
            1510: 145,
            1660: 151,
            1810: 163,
            1960: 169,
            2110: 200,
            2260: 209,
            2410: 220,
            2560: 230,
            2710: 290,
            2860: 302,
            3010: 313
        },
        1200: {
            610: 99,
            760: 108,
            910: 114,
            1060: 124,
            1210: 130,
            1360: 145,
            1510: 151,
            1660: 158,
            1810: 170,
            1960: 176,
            2110: 207,
            2260: 217,
            2410: 227,
            2560: 238,
            2710: 298,
            2860: 310,
            3010: 322
        },
        1500: {
            610: 102,
            760: 111,
            910: 124,
            1060: 135,
            1210: 142,
            1360: 155,
            1510: 163,
            1660: 173,
            1810: 182,
            1960: 194,
            2110: 225,
            2260: 234,
            2410: 249,
            2560: 258,
            2710: 315,
            2860: 329,
            3010: 347
        },
        1800: {
            610: 111,
            760: 120,
            910: 130,
            1060: 142,
            1210: 151,
            1360: 166,
            1510: 176,
            1660: 187,
            1810: 197,
            1960: 207,
            2110: 239,
            2260: 252,
            2410: 266,
            2560: 275,
            2710: 335,
            2860: 350,
            3010: 367
        },
        2100: {
            610: 114,
            760: 124,
            910: 139,
            1060: 151,
            1210: 163,
            1360: 176,
            1510: 187,
            1660: 200,
            1810: 210,
            1960: 225,
            2110: 259,
            2260: 269,
            2410: 286,
            2560: 300,
            2710: 360,
            2860: 378,
            3010: 391
        },
        2400: {
            610: 117,
            760: 130,
            910: 145,
            1060: 158,
            1210: 173,
            1360: 182,
            1510: 197,
            1660: 210,
            1810: 222,
            1960: 235,
            2110: 270,
            2260: 286,
            2410: 300,
            2560: 315,
            2710: 378,
            2860: 395,
            3010: 412
        },
        2700: {
            610: 124,
            760: 139,
            910: 155,
            1060: 170,
            1210: 187,
            1360: 197,
            1510: 214,
            1660: 228,
            1810: 245,
            1960: 259,
            2110: 294,
            2260: 307,
            2410: 324,
            2560: 342,
            2710: 409,
            2860: 426,
            3010: 447
        },
        3000: {
            610: 127,
            760: 145,
            910: 156,
            1060: 173,
            1210: 190,
            1360: 204,
            1510: 218,
            1660: 235,
            1810: 253,
            1960: 267,
            2110: 304,
            2260: 321,
            2410: 338,
            2560: 352,
            2710: 420,
            2860: 440,
            3010: 457
        },
        3300: {
            610: 130,
            760: 148,
            910: 166,
            1060: 179,
            1210: 197,
            1360: 214,
            1510: 231,
            1660: 250,
            1810: 262,
            1960: 284,
            2110: 319,
            2260: 335,
            2410: 355,
            2560: 373,
            2710: 440,
            2860: 460,
            3010: 481
        }
    };


    static getPrice(width: number, height: number, group: number): number {
        let priceMatrix: PriceMatrix;

        // Assign the correct price matrix based on the group
        if (group === 1) {
            priceMatrix = Pricing.group1PriceMatrix;
        } else if (group === 2) {
            priceMatrix = Pricing.group2PriceMatrix;
        } else {
            priceMatrix = Pricing.group3PriceMatrix;
        }

        // Find the nearest available height
        const heights = Object.keys(priceMatrix)
            .map(Number)
            .filter(h => h >= height);

        const nearestHeight = heights.length > 0 ? Math.min(...heights) : null;

        if (nearestHeight === null) {
            return 0;
        }

// Find the nearest available width
        const widths = priceMatrix[nearestHeight] ? Object.keys(priceMatrix[nearestHeight])
            .map(Number)
            .filter(w => w >= width) : [];

        const nearestWidth = widths.length > 0 ? Math.min(...widths) : null;

        if (nearestWidth === null) {
            return 0;
        }

        return priceMatrix[nearestHeight][nearestWidth];
    }
}

export default Pricing;